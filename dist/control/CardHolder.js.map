{"version":3,"sources":["../../src/control/CardHolder.js"],"names":["sap","ui","define","Control","jQuery","extend","_current","_step","_loading","metadata","properties","loadingText","type","aggregations","cards","multiple","defaultAggregation","bounceNewElements","newElements","$","find","slice","transition","onAfterRendering","visibility","once","observeChanges","onTopVisible","length","getCards","delayedCall","Math","min","invalidate","renderer","oRm","oC","forEach","i","getLoadingText"],"mappings":";;AAAAA,IAAIC,EAAJ,CAAOC,MAAP,CAAc,CACV,qBADU,EAEV,mBAFU,CAAd,EAGG,UAAUC,OAAV,EAAmBC,MAAnB,EAA2B;;AAE1B,WAAOD,QAAQE,MAAR,CAAe,4BAAf,EAA6C;AAChDC,kBAAU,CADsC;AAEhDC,eAAO,CAFyC;AAGhDC,kBAAU,IAHsC;;AAKhDC,kBAAU;AACNC,wBAAY;AACRC,6BAAa,EAAEC,MAAM,QAAR;AADL,aADN;AAINC,0BAAc;AACVC,uBAAO,EAAEF,MAAM,qBAAR,EAA+BG,UAAU,IAAzC;AADG,aAJR;AAONC,gCAAoB;AAPd,SALsC;;AAehDC,2BAAmB,6BAAW;AAC1B,gBAAIC,cAAc,KAAKZ,QAAL,GAAgB,KAAKC,KAArB,KAA+B,CAA/B,GAAmC,CAAnC,GAAuC,KAAKD,QAAL,GAAgB,KAAKC,KAA9E;AACA,iBAAKY,CAAL,GAASC,IAAT,CAAc,aAAd,EAA6BC,KAA7B,CAAmC,CAACH,WAApC,EAAiDI,UAAjD,CAA4D,QAA5D;AACH,SAlB+C;;AAoBhDC,0BAAkB,4BAAY;AAAA;;AAC1B,iBAAKJ,CAAL,GAASC,IAAT,CAAc,SAAd,EAAyBI,UAAzB,CAAoC;AAChCC,sBAAM,IAD0B;AAEhCC,gCAAgB,IAFgB;AAGhCC,8BAAc,wBAAM;AAChB,wBAAIC,SAAS,CAAC,MAAKC,QAAL,MAAmB,EAApB,EAAwBD,MAArC;AACA,wBAAI,MAAKtB,QAAL,GAAgBsB,MAApB,EAA4B;AACxBxB,+BAAOJ,GAAP,CAAW8B,WAAX,CAAuB,IAAvB,EAA6B,KAA7B,EAAmC,YAAM;AACrC,kCAAKxB,QAAL,GAAgByB,KAAKC,GAAL,CAASJ,MAAT,EAAiB,MAAKtB,QAAL,GAAgB,MAAKC,KAAtC,CAAhB;AACA,kCAAKC,QAAL,GAAgB,MAAKF,QAAL,KAAkBsB,MAAlC;AACA,kCAAKK,UAAL;AACH,yBAJD;AAKH;AACJ;AAZ+B,aAApC;AAcA,iBAAKhB,iBAAL;AACH,SApC+C;;AAsChDiB,kBAAU,kBAAUC,GAAV,EAAeC,EAAf,EAAmB;AACzB;AAAA;AAAA,qCACyBA,EADzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kCAIgB,CAACA,GAAGP,QAAH,MAAiB,EAAlB,EAAsBR,KAAtB,CAA4B,CAA5B,EAA+Be,GAAG9B,QAAlC,EAA4C+B,OAA5C,CAAoD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0CAE/BC,CAF+B;AAAA;AAAA;AAAA,iBAApD,CAJhB;AAAA;AAAA,kCAYYF,GAAG5B,QAAH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sCAEK4B,GAAGG,cAAH,MAAuB,EAF5B;AAAA;AAAA,oBAZZ;AAAA;AAAA;AAmBH;AA1D+C,KAA7C,CAAP;AA6DH,CAlED","file":"CardHolder.js","sourcesContent":["sap.ui.define([\n    \"sap/ui/core/Control\",\n    \"jquery.sap.global\"\n], function (Control, jQuery) {\n\n    return Control.extend(\"gallery.control.CardHolder\", {\n        _current: 8,\n        _step: 4,\n        _loading: true,\n\n        metadata: {\n            properties: {\n                loadingText: { type: \"string\" }\n            },\n            aggregations: {\n                cards: { type: \"sap.ui.core.Control\", multiple: true }\n            },\n            defaultAggregation: \"cards\"\n        },\n\n        bounceNewElements: function() {\n            let newElements = this._current % this._step === 0 ? 4 : this._current % this._step;\n            this.$().find(\".withBounce\").slice(-newElements).transition(\"bounce\");\n        },\n\n        onAfterRendering: function () {\n            this.$().find(\".loader\").visibility({\n                once: true,\n                observeChanges: true,\n                onTopVisible: () => {\n                    let length = (this.getCards() || []).length;\n                    if (this._current < length) {\n                        jQuery.sap.delayedCall(1000, this, () => {\n                            this._current = Math.min(length, this._current + this._step);\n                            this._loading = this._current !== length;\n                            this.invalidate();\n                        });\n                    }\n                }\n            });\n            this.bounceNewElements();\n        },\n\n        renderer: function (oRm, oC) {\n            oRm.render(\n                <div ui5ControlData={oC} class=\"ui segment\" >\n                    <div class=\"ui grid stackable four column\">\n                        {\n                            (oC.getCards() || []).slice(0, oC._current).forEach(i => (\n                                <div class=\"four wide column withBounce\">\n                                    <ui5Control>{i}</ui5Control>\n                                </div>\n                            ))\n                        }\n                    </div>\n                    {\n                        oC._loading &&\n                        <div class=\"ui large centered inline text loader active sapUiMediumMarginTopBottom\">\n                            {oC.getLoadingText() || \"\"}\n                        </div>\n                    }\n                </div>\n            );\n        }\n    });\n\n});\n"]}